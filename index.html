<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="tips/ecs1.css">
    <style type="text/css">
      <!--
	H1 {
	background:#6B8E23;
	color:white;
	padding:2px;
	font-size:medium;
	font-weight:normal;
	}
	H2 {
	color:#6B8E23
	}
	H3 {
	color:#6B8E23
	}
	H4 {
	margin-left:15px;
	color:#6B8E23
	}
	SPAN{
	color:blue;
	font-weight: bold;
	border:1px solid gray;
	}
	PRE {
	width:50%;
	background-color: #f2ffe8;
	border:1px solid gray;
	margin:12px;
	margin-left:3em;
	padding:5px;
	}
	BLOCKQUOTE{
	background-color: #FFE4C4;
	font-size:smaller;
	padding:3px;
	}
	p {
	padding-left:2em;
	}
	div{
	width:80%;
	margin-left:2em;
	border:1px solid gray;
	background-color:#F5DEB3;
	}
	-->
    </style>
    <title>C 環境 TEST</title>
  </head>
  <body>

    <h1>複雑系科学演習　C 環境 TEST</h1>

    <h2>演習環境の確認</h2>
    <hr>

    まずはじめに、本演習で使用するC言語やOpenOfficeの環境が整っているかの確認を行います。<br>
    LINUX上での作業を想定して説明します。手順は以下の通りです。

    <ol>
      <li>プログラムの作成</li>
      <li>コンパイル</li>
      <li>実行・結果のファイルへの書き出し</li>
      <li>結果のグラフ化</li>
      <li>考察のためのグラフ作成</li>
      <li>レポート作成</li>
      <li>印刷</li>
      <li>提出</li>
    </ol>

    これらの作業の前に、本演習で使用するディレクトリを各自決めておいてください。<br>
    （例えば、各自のホームディレクトリ [通常 /home/"ログイン名"。コマンドプロンプトではdefaultでここにいる] の下に <SPAN>2023/ECS</SPAN>
を作成するなど）

    <hr>

    <h3>1. プログラムの作成</h3>

    <h4>1.1. エディタを起動する</h4>
    <p>
      emacsなどを使用してください。
    </p>
    <h4>1.2. エディタでプログラムを作成する</h4>
    <p>
      1から100まで順次足していって、以下のように、その都度結果を表示するプログラムをCで作成してください。<br>
    </p>
    <pre>
1 1
2 3
3 6
4 10
...</pre>

    <h4>1.3. プログラムを保存する</h4>
    <p>
      ファイルを<span>ctest1.c</span> の名前で、各自の設定した演習用ディレクトリに保存してください。
    </p>

    <h3>2. プログラムのコンパイル</h3>
    <p>
      コマンドプロンプト（GNOME端末）を起動し、ホームディレクトリから演習用ディレクトリに移動します。<br>
      gccコマンドを用いて上記で作成したプログラムをコンパイルしてください。
    </p>

    <pre>$gcc -o ctest1 ctest1.c</pre>

    <h3>3. プログラムの実行・書き出し</h3>
    <p>
      指定どおりの結果が吐き出されるか以下で確認し
    </p>

    <pre>$./ctest1</pre>

    <p>以下で結果をデータファイル（ここでは<span>ctest1.dat</span>)に書き出してください。</p>

    <pre>$./ctest1 > ctest1.dat</pre>

    <blockquote>
      ※上記の ">"　は"リダイレクト"と言い、画面に表示されるはずのデータを、">"のあとに指定したファイル（ここではctest1.dat)に出力しています。
    </blockquote>

    <h3>4. 結果のグラフ化</h3>

    上記で作成したデータファイルからグラフを作成します。<br>
    本演習では、GNUPLOTを使用します。皆さんのPCのdefault状態では、GNUPLOTがインストールされていません。以下の手順で各自、インストールしてください。<br>

    <blockquote>

      ※A)2018,2019,2020,2021年度推奨機を持っていて、CentOS6.7がwindows8或いはwindows10(64bit版)の上でVirtualBoxを介して正常に動作する学生は、CentOSに"gnuplot"をインストールして、数値計算した結果をグラフ化する。

<pre> 注意）入学時にwindows7,8がinstallされていたが、その後にwindows10にupdateした場合は、<br /> 
windows10にVirtualBoxを再installしてから、以下の作業を行うこと。<br />
（但し、必要なファイルをバックアップをしてから再installすること。）
</pre>

<pre> Windowsを起動して：</pre>
<pre> I) ネットワーク接続する。</pre>
<pre> II) CentOSを起動する。アプリケーション-->システムツール-->ソフトウエアを選ぶ。
左上の検索でgnuplotを探す。</pre>
<pre> III)一覧から A program for plotting mathematical expressions and data (gnuplot-4.2.6-2.el6(x86_64))を探す。</pre>

<pre>IV)左側にチェックをいれて、適用を押す。</pre>

<pre>V)2つのファイルが表示される。それらをインストールボタンを押してインストールする。</pre> 
<pre>(注意)その際、root のパスワードをきかれる。default 状態のパスワードは password である。
これを入力するとインストールが始まる。</pre>
    </blockquote>

    <blockquote>

      ※)最近のMac (MacOS El Capitan/Sierra)を使っている学生は、以下の手順でinstall する。
<pre>i) macOS 用パッケージマネージャーのインストール

Console画面から <br />
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

と打ってHomebrewをinstallする。<br />
</pre>
<pre>ii) AquaTermをインストールする。
https://sourceforge.net/projects/aquaterm/files/
</pre>
<pre>iii) X11をインストールする。
https://www.xquartz.org/</pre>
<pre>iv) Console画面から <br />
brew install gnuplot --with-aquaterm --with-x11

と打ってgnuplotをinstallする。<br />
</pre>

    </blockquote>

    <blockquote>

      ※A)2017年度推奨機を持っていて、Ubuntuがwindows8或いはwindows10(64bit版)の上でVirtualBoxを介して正常に動作する学生は、Ubuntuに"gnuplot"をインストールして、数値計算した結果をグラフ化する。

<pre> 注意）入学時にwindows7,8がinstallされていたが、その後にwindows10にupdateした場合は、<br /> 
windows10にVirtualBoxを再installしてから、以下の作業を行うこと。<br />
（但し、必要なファイルをバックアップをしてから再installすること。）
</pre>

<pre> Windowsを起動して：</pre>
<pre> I) ネットワーク接続する。</pre>
<pre> II) Ubuntuを起動する。システム-->管理-->ソフトウエアの追加/削除を選ぶ。
左上の検索でgnuplotを探す。</pre>
<pre> III)一覧から A program for plotting mathematical expressions and data (gnuplot-4.2.6-2.el6(x86_64))を探す。</pre>

<pre>IV)左側にチェックをいれて、適用を押す。</pre>

<pre>V)2つのファイルが表示される。それらをインストールボタンを押してインストールする。</pre> 
<pre>(注意)その際、root のパスワードをきかれる。default 状態のパスワードは password である。
これを入力するとインストールが始まる。</pre>
    </blockquote>

    <blockquote>

      ※A)2016年度推奨機を持っていて、CentOS6.5がwindows8或いはwindows10(64bit版)の上でVirtualBoxを介して正常に動作する学生は、CentOSに"gnuplot"をインストールして、数値計算した結果をグラフ化する。

<pre> 注意）入学時にwindows7,8がinstallされていたが、その後にwindows10にupdateした場合は、<br /> 
windows10にVirtualBoxを再installしてから、以下の作業を行うこと。<br />
（但し、必要なファイルをバックアップをしてから再installすること。）
</pre>

<pre> Windowsを起動して：</pre>
<pre> I) ネットワーク接続する。</pre>
<pre> II) CentOSを起動する。システム-->管理-->ソフトウエアの追加/削除を選ぶ。
左上の検索でgnuplotを探す。</pre>
<pre> III)一覧から A program for plotting mathematical expressions and data (gnuplot-4.2.6-2.el6(x86_64))を探す。</pre>

<pre>IV)左側にチェックをいれて、適用を押す。</pre>

<pre>V)2つのファイルが表示される。それらをインストールボタンを押してインストールする。</pre> 
<pre>(注意)その際、root のパスワードをきかれる。default 状態のパスワードは password である。
これを入力するとインストールが始まる。</pre>
    </blockquote>

    <blockquote>
      ※A)2015年度推奨機を持っていて、CentOS6.3がwindows8(64bit)の上で正常に動作する学生は、CentOSに"gnuplot"をインストールして、数値計算した結果をグラフ化する。

<pre> Windowsを起動して：</pre>
<pre> I) ネットワーク接続する。</pre>
<pre> II) CentOSを起動する。システム-->管理-->ソフトウエアの追加/削除を選ぶ。
左上の検索でgnuplotを探す。</pre>
<pre> III)一覧から A program for plotting mathematical expressions and data (gnuplot-4.2.6-2.el6(x86_64))を探す。</pre>

<pre>IV)左側にチェックをいれて、適用を押す。</pre>

<pre>V)2つのファイルが表示される。それらをインストールボタンを押してインストールする。</pre> 
    </blockquote>

    <blockquote>
      ※B)windowsの上にCentOSがインストールされてないPCに対しては、
"MinGW"と"gnuplot"をwindowsにインストールして、<br />
数値計算した結果をグラフ化する。
(VirtualBoxを再installしてもCentOSが起動しない場合やCentOSのpasswordを忘れた場合も含む。)<br />

注) 以下のサイト https://webdav.fun.ac.jp/にuploadされている2つのpdfファイルは、<br />
<a href="./MinGW gnuplot インストール手順.pdf">こちらからダウンロードできます（MinGW gnuplot インストール手順.pdf）</a> <br />
<a href="./使い方.pdf">こちらからダウンロードできます（使い方.pdf）</a> <br />
これをよく読んでインストールする。

<pre> Windowsを起動して：</pre>
<pre> I) ネットワーク接続する。</pre>
<pre> II) https://webdav.fun.ac.jp/にloginする。  </pre>
<pre> III) https://webdav.fun.ac.jp/proself/list/propfind.go
から"複雑系科学演習"にいく。</pre> 
<pre> IV) folderから以下の２つのpdf fileをダウンロードする。

"MinGW Gnuplot インストール 手順.pdf",
"使い方.pdf"</pre> 

<pre> V) これをよく読んでインストールする。
(上記のpdf fileに書かれているサイトに接続すると、最新のバージョンがインストールされる。)
</pre> 

    </blockquote>

    <blockquote>
      ※)Mac machine を使っている人は、Macのダウンロードサイトから
         gnuplot関連ファイルをダウンロードしてインストールする。
         或いは、gnuplotのサイトからMac machine用のgnuplotのファイルをダウンロー         ドしてインストールする。
    </blockquote>

    <blockquote>
      -------------------- 以下は過年度学生に対する情報。---------------------------------------------------
      --------------------------------------------------------------------------------------------------------
      --------------------------------------------------------------------------------------------------------

    </blockquote>

    <blockquote>
      ※C)Oepn Suse 11.3 がインストールされている学生に対して：
I)ルートで ログインする。”コントロールセンター”の”ネットワークのプロキシ”で”マニュアルでプロキシの設定を行う”にチェックが入ってないことを確認する。更に、”すべてのプロトコルで同じプロキシを使う”にチェックが入ってないことを確認する。
II)インターネットに接続する。

      <pre> 1)”http://www.gnuplot.info/”にいき、”Download”
”Primary download site on SourceForge””Gnuplot””4.6.0”を選び、
”gnuplot-4.6.0.tar.gz”をdownloadする。
</pre>
<pre> 2)/root/ダウンロードへ行く。gnuplot-4.6.0.tar.gzをダブルクリックする。
展開をクリックすると"gnuplot-4.6.0.tar.gz"が展開され、
/root/ダウンロードに "gnuplot-4.6.0"ができる。
"gnuplot-4.6.0"を右クリックしてopen in terminalを選ぶ。</pre>
<pre>     2-1)terminal において ./configure </pre>
<pre>     2-2)terminal において make </pre>
<pre>     2-3)terminal において make check </pre>
<pre>     2-4) terminal において sudo make install </pre>

    </blockquote>

    <blockquote>
      ※D)Oepn Suse 11.2 或は 11.1 がインストールされている学生に対して：
I)”コントロールセンター”の”ネットワークのプロキシ”で”マニュアルでプロキシの設定を行う”にチェックが入ってないことを確認する。更に、”すべてのプロトコルで同じプロキシを使う”にチェックが入ってないことを確認する。
II)インターネットに接続する。

      <pre> 1)”コントロールセンター”から”YaST”を選択する。
新しいウインドウが現れる。そこから、”ソフトウエア管理”を選択する。
(”コントロールセンター”から、直接 "ソフトウエアのインストール"を選択してもいい。)</pre>
<pre> 2)パッケージ一覧から、
libpng3,wxGTK,libmspack0,gd-devel,gnuplot
を選んでインストールする。具体的には以下の手順を繰り返せばいい。</pre>
<pre>     2-1)パッケージ検索で、上記のファイルを探す。</pre>
<pre>     2-2)"インストールボタン"をクリックする。</pre>
<pre>     2-3)"適用ボタン"をクリックするとインストールが実行される。</pre>
<pre>     2-4) 2-1)～2-3)を繰り返して５個のファイルをすべてインストールする。</pre>

<pre>注意)インストールの途中で”Open SUSE11.1-0(ディスク１)
を挿入してください。”という警告が出ることがあります。
この場合は、２回程度”スキップボタン”を繰り返し押すとインストールが始まります。</pre>
    </blockquote>

    <blockquote>
E)Oepn Suse 10.0 がインストールされている学生に対して：root でPCにloginして以下の２つのファイルを
とってくる。ファイルは、https://webdav.fun.ac.jp/に各自 loginし、
TOP->StudentAndStaff->Course->複雑系科学演習にある gd-2.0.35.tar.gz と gnuplot-4.2.5.tar.gz をとってくる。これらのファイルを/rootに置き以下の操作をコンソール画面で行ってください。(画面をコピー＆ペーストするのが最も簡単で正確です。)

      <pre># gunzip -c gd-2.0.35.tar.gz | tar xvf - </pre>
      <pre># cd gd-2.0.35</pre>
      <pre># ./configure</pre>
      <pre># make</pre>
      <pre># make install </pre>
      <pre># cd ../ </pre>
      <pre># gunzip -c gnuplot-4.2.5.tar.gz | tar xvf -</pre>
      <pre># cd gnuplot-4.2.5</pre>
      <pre># ./configure --with-png=/usr/local/include </pre>
      <pre># make</pre>
      <pre># make install</pre>
      としてインストールしてください。
    </blockquote>

    <blockquote>
      ※※Windows しかインストールされてないPCに対しては、以下の手順で各自、
インストールしてください。

1)インストールファイルをとってくる。https://webdav.fun.ac.jp/に各自 loginし、
TOP->StudentAndStaff->Course->複雑系科学演習にある gnuplot-4.6.5.tar.gz をとってきてデスクトップに置く。
2)このファイルをデスクトップで解凍すると、デスクトップにgnuplotというフォルダができる。これをクリックしてフォルダ$gnuplot$binまでいき、wgnuplotをクリックするとgnuplotが起動される。起動後の設定としては、

      <pre> 画面を右クリックして、
Choose Font を選び、フォント名 @MS ゴシック を選ぶ。 </pre>
      <pre> 右クリックのメニューから、
Update C$Documents and Settings$***$Application Data$wgnuplot.ini
を選ぶと、この設定が保存される。</pre>

ここで、マーク *** は、ユーザー名である。
尚、Windowsで計算する人は、Visual Studio をインストールするといいでしょう。
    </blockquote>

    <blockquote>
      もし、C言語コンパイラーがインストールされてないなら、以下のC言語コンパイラー Cygwin, GOW (Gnu on Windows), MinGW (Minimalist Gnu for windows) のひとつをインストールしてください。
    </blockquote>

    <blockquote>
      もし、editorがインストールされてないなら、秀丸などを窓の杜などからダウンロードしてインストールするといいでしょう。
    </blockquote>

    <blockquote>
      ※※※Mac しかインストールされてないPCに対しては、以下の手順で各自、
インストールしてください。
1)インストールファイルをとってくる。http://www.muskmelon.jp/macosxに接続し、gnuplot.app をとってきてデスクトップにおく。ここで、Mac OS のバージョンが Leopard か Tiger とでは手順が異なることに注意すること。
2)このファイルをデスクトップで解凍すると、デスクトップにgnuplotというフォルダができる。これをクリックすればgnuplotが起動される。場合によっては、パスを設定する必要がある。
    </blockquote>

    <blockquote>
      ※※※（注意）最近のMac OS (例えばEl Capitanなど)がインストールされているPCに対しては、以下の手順で各自、インストールしてください。

1)インストールファイルをとってくる。http://www.muskmelon.jp/macosxに接続し、gnuplot.app をとってきてデスクトップにおく。或いは、Mac用のgnuplot-5.0.3.tar.gzなどをダウンロードして、それを解凍してgnuplot.appを作る。このgnuplot.appをアプリケーションに移動させる。2)使用時は、このgnuplot.appをダブルクリックして起動する。
3)但し、x11を使うために、XQuarzをサイトからダウンロードしてインストールする。

    </blockquote>

    <h4>4.1. GNUPLOTを起動する</h4>
    <p>
      GNUPLOT用に新たにコマンドプロンプトを起動し、演習用ディレクトリに移動します。<br>
      GNUPLOTを起動してください。（ちなみに終了は"exit"です）
    </p>

    <pre>$ gnuplot </pre>
    
    <h4>4.2. グラフを確認する</h4>
    <p>

      上記で作成したデータをグラフ化し、意図した結果が出力されているか、自分で確認してください。
    </p>
    <pre>gnuplot> plot "ctest1.dat"</pre>
    

    <h4>4.3. 正式なグラフを作成する</h4>
    <p>

      確認がとれたら、レポート貼り付け用のグラフを作成してください。<br>
    </p>
    <p style="text-decoration:blink; color:red; font-weight:bold;"> レポート等に使用するグラフは、他人が見て、何が書いてあるか明確である必要があります。<br>
      <a href="tips/graph.html">こちらを参照</a>の上、必ず体裁を整えたグラフを作成してください。
    </p>

    <p>
      ※<a href="HowtoGNUPLOT/Toc.html">GNUPLOTの使い方の概要</a>。
    </p>

    <h4>4.4. レポート用のグラフを書き出す</h4>
    <p>
      レポートに貼り付ける体裁のグラフが書けたら、PNG形式でグラフを書き出します。
    </p>
    <pre>gnuplot> set term png
gnuplot> set output "ctest1.png"
gnuplot> replot</pre>
    <p>
      これで、演習用ディレクトリに  <span>ctest1.png</span>というグラフの図が書き出されます。<br>
      レポートに貼り付けるには、OpenOffice Writer→[挿入]を利用して下さい。
    </p>
    <p>
      なお、もとの状態（画面上でのグラフ描画）に戻るには、
    </p>
    <pre>gnuplot> set output
gnuplot> set term X11</pre>
    <p>です。</p>

      但し、Windows でgnuplpt を使っている場合は、もとの状態（画面上でのグラフ描画）に戻るには、
    </p>
    <pre>gnuplot> set output
gnuplot> set term windows</pre>
    <p>です。</p>

    <h3>5. 考察のためのグラフ作成</h3>

    <p>
      レポートや論文では実験結果に対する考察が求められます。<br>
      そこで、考察のためのグラフを用意します。
    </p>
    <pre>gnuplot> plot "ctest1.dat", x*(x+1)/2</pre>
    <p>
    として、先ほどの"ctest1.dat"とx*(x+1)/2という関数を重ねたグラフを描きます。
    この図を<span>ctest2.png</span>として保存した後、<br>
    先ほどと同様の手順でレポートに貼り付けます。
    </p>
    <pre>gnuplot> set term png
gnuplot> set output "ctest2.png"
gnuplot> replot</pre>

    <blockquote>
    1からnまでの数列の和を計算しましょう。

    時間に余裕がある人は、<a href="./mandelbrotjulia-2ndutf.pdf">課題（mandelbrotjulia-2ndutf.pdf）</a>のMandelbrot図形を描きなさい。 <br />
    </blockquote>

    <h3>6. レポートの作成</h3>

    <p>
<!--      本演習でのレポートについては  <a href="http://sisp.fun.ac.jp/~sysinf/report.html">レポートの基本事項</a> に従います。</p> -->
    <p> レポートには、単に作成した画像(グラフ)を提示するだけではなく、画像から何がわかるか、どのようなメカニズムでそうなるのかなどの考察を含めて記述すること。
    <p>
      上記の事柄を考慮して、
    </p>
    <div>
      <br>
      <ol>
	<li>プログラムリスト</li>
	<li>1から100まで順次加えた和の値</li>
	<li>結果のグラフ</li>
	<li>考察</li>
      </ol>
    </div>
    <p>について、OpenOffice Writerを利用してレポートを作成してください。
    </p>
    <h3>7. 印刷</h3>
    <p>
      OpenOfficeで作成したレポートを、PDFへ書き出し、印刷してください。<br>
      レポートをPDF形式に変換するには、[ファイル]→[PDFとしてエクスポート] を利用して下さい。
    </p>
    </p>

    <h3>8. 提出</h3>
    <p>
      本日のレポートは、<font color="red" size="+2"><strong>提出する必要はない</strong></font>。次回からのレポートは、<font color="red" size="+2"><strong>担当教員の指示に従うこと。</strong></font>
    </p>
    <hr>
    本項目担当：川口 聡(234号室, 本棟2F)</a>
  </body>
</html>
